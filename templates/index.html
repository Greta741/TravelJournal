{{{htmlData.head}}}
<body>
{{{htmlData.navbar}}}

<div class="search-bar">
    <form action="javascript:search();" id="search-form">
        <input type="text" id="from-location" name="form-control from-location" class="search-input from-search-input" autocomplete="off" placeholder="I want to travel from" required="true" value="">
        <input type="text" id="to-location" name="form-control to-location" class="search-input to-search-input" autocomplete="off" placeholder="to" value="">
        <input type="submit" style="visibility: hidden;" />
    </form>
</div>
<div id="main-content">
{{#each data}}
    <div class="col-md-4 col-sm-6 col-xs-12">
        <div class="journey-div">
            {{{this.image}}}
            <h2 class="journey-user">{{this.user}}</h2>
            <p class="journey-description">{{this.description}}</p>
            {{{this.button}}}
        </div>
    </div>
{{/each}}
</div>

<script>

    function displayJourneys(data) {
        var mainDiv = document.getElementById('main-content');
        mainDiv.innerHTML = '';
        if (data.length === 0) {
            mainDiv.innerHTML = '<div class="message">Couldn\'t find anything.</div>';
            return;
        }
        data.forEach((journey) => {
            var temp = '<div class="col-md-4 col-sm-6 col-xs-12">' +
            '<div class="journey-div">';
            if (journey.image !== false && journey.image !== 'false') {
                temp += `<div class="journey-image" style="background-image: url('${journey.image}')"></div>`;
            } else {
                temp += `<div class="journey-image" style="background-image: url('../public/noimg.png')"></div>`;
            }
            temp += `<h2 class="journey-user">${journey.user}</h2>` +
            `<p class="journey-description">${journey.description}</p>` +
            `<button class="journey-read-more" onclick="window.location.href='./journey/${journey._id}'">Read more</button>` +
            `</div></div>`;
            mainDiv.innerHTML += temp;
        });
    }

    function search() {
        console.log('search');
        var searchData = {
            from: document.getElementById('from-location').value,
            to: document.getElementById('to-location').value,
        }
         $.get("/search", searchData, function(result) {
             console.log(result);
                if (result) {
                    displayJourneys(result);
                } else {

                }
            });   
    }
    
</script>

</body>
</html>